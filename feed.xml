<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>goal-web</title>
    <link href="https://goal-web.com/feed.xml" rel="self" />
    <link href="https://goal-web.com" />
    <updated>2023-01-31T23:09:30+08:00</updated>
    <author>
        <name>qbhy</name>
    </author>
    <id>https://goal-web.com</id>

    <entry>
        <title>数据库组件</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/shu-ju-ku-zu-jian.html"/>
        <id>https://goal-web.com/shu-ju-ku-zu-jian.html</id>
            <category term="golang数据库工具"/>
            <category term="goal组件"/>

        <updated>2023-01-31T23:09:30+08:00</updated>
            <summary>
                <![CDATA[
                    Goal-web/database goal-web/database goal 框架的数据库组件，当然你也可以在 goal 之外的框架使用他。 目前数据库组件暂时不能使用关联关系，你可以用 WhereExists 来代替 go get github.com/goal-web/database 使用 - usage goal 的脚手架自带了绝大多数开发一个 web 应用的所需要的功能和组件，当然包括了数据库组件。一般情况下，我们只需要在 .env 修改自己的数据库配置即可，添加数据库连接可以 config/database.go 修改 Connections 属性。 默认情况下，config/database.go 配置文件像下面那样，默认添加了 sqlite、MySQL、postgresSql 三个数据库连接的配置 和 Laravel 不同的是，goal 把 redis 配置独立出去了，因为 redis 也是一个独立的模块，不想让 redis 依赖 database package config import ( &quot;github.com/goal-web/contracts&quot;&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h1 id="goal-webdatabase">Goal-web/database</h1>
<p><a href="https://github.com/goal-web/database">goal-web/database</a><br>goal 框架的数据库组件，当然你也可以在 goal 之外的框架使用他。</p>
<blockquote>
<p>目前数据库组件暂时不能使用关联关系，你可以用 <code>WhereExists</code> 来代替</p>
</blockquote>
<h2 id="安装---install">安装 - install</h2>
<pre><code class="language-bash">go get github.com/goal-web/database
</code></pre>
<h2 id="使用---usage">使用 - usage</h2>
<p>goal 的脚手架自带了绝大多数开发一个 web 应用的所需要的功能和组件，当然包括了数据库组件。一般情况下，我们只需要在 .env 修改自己的数据库配置即可，添加数据库连接可以 <code>config/database.go</code> 修改 <code>Connections</code> 属性。</p>
<h3 id="配置---config">配置 - config</h3>
<p>默认情况下，<code>config/database.go</code> 配置文件像下面那样，默认添加了 sqlite、MySQL、postgresSql 三个数据库连接的配置</p>
<blockquote>
<p>和 <code>Laravel</code> 不同的是，goal 把 redis 配置独立出去了，因为 redis 也是一个独立的模块，不想让 redis 依赖 database</p>
</blockquote>
<pre><code class="language-go">package config
import (
    &quot;github.com/goal-web/contracts&quot;
    &quot;github.com/goal-web/database&quot;
)
func init() {
    configs[&quot;database&quot;] = func(env contracts.Env) interface{} {
        return database.Config{
            Default: env.StringOption(&quot;db.connection&quot;, &quot;mysql&quot;),
            Connections: map[string]contracts.Fields{
                &quot;sqlite&quot;: {
                    &quot;driver&quot;:   &quot;sqlite&quot;,
                    &quot;database&quot;: env.GetString(&quot;sqlite.database&quot;),
                },
                &quot;mysql&quot;: {
                    &quot;driver&quot;:          &quot;mysql&quot;,
                    &quot;host&quot;:            env.GetString(&quot;db.host&quot;),
                    &quot;port&quot;:            env.GetString(&quot;db.port&quot;),
                    &quot;database&quot;:        env.GetString(&quot;db.database&quot;),
                    &quot;username&quot;:        env.GetString(&quot;db.username&quot;),
                    &quot;password&quot;:        env.GetString(&quot;db.password&quot;),
                    &quot;unix_socket&quot;:     env.GetString(&quot;db.unix_socket&quot;),
                    &quot;charset&quot;:         env.StringOption(&quot;db.charset&quot;, &quot;utf8mb4&quot;),
                    &quot;collation&quot;:       env.StringOption(&quot;db.collation&quot;, &quot;utf8mb4_unicode_ci&quot;),
                    &quot;prefix&quot;:          env.GetString(&quot;db.prefix&quot;),
                    &quot;strict&quot;:          env.GetBool(&quot;db.struct&quot;),
                    &quot;max_connections&quot;: env.GetInt(&quot;db.max_connections&quot;),
                    &quot;max_idles&quot;:       env.GetInt(&quot;db.max_idles&quot;),
                },
                &quot;pgsql&quot;: {
                    &quot;driver&quot;:          &quot;postgres&quot;,
                    &quot;host&quot;:            env.GetString(&quot;db.pgsql.host&quot;),
                    &quot;port&quot;:            env.GetString(&quot;db.pgsql.port&quot;),
                    &quot;database&quot;:        env.GetString(&quot;db.pgsql.database&quot;),
                    &quot;username&quot;:        env.GetString(&quot;db.pgsql.username&quot;),
                    &quot;password&quot;:        env.GetString(&quot;db.pgsql.password&quot;),
                    &quot;charset&quot;:         env.StringOption(&quot;db.pgsql.charset&quot;, &quot;utf8mb4&quot;),
                    &quot;prefix&quot;:          env.GetString(&quot;db.pgsql.prefix&quot;),
                    &quot;schema&quot;:          env.StringOption(&quot;db.pgsql.schema&quot;, &quot;public&quot;),
                    &quot;sslmode&quot;:         env.StringOption(&quot;db.pgsql.sslmode&quot;, &quot;disable&quot;),
                    &quot;max_connections&quot;: env.GetInt(&quot;db.pgsql.max_connections&quot;),
                    &quot;max_idles&quot;:       env.GetInt(&quot;db.pgsql.max_idles&quot;),
                },
            },
        }
    }
}
</code></pre>
<p><code>.env</code> 的数据库相关配置</p>
<pre><code class="language-bash"># 默认连接
db.connection=sqlite

sqlite.database=/Users/qbhy/project/go/goal-web/goal/example/database/db.sqlite

db.host=localhost
db.port=3306
db.database=goal
db.username=root
db.password=password

db.pgsql.host=localhost
db.pgsql.port=55433
db.pgsql.database=postgres
db.pgsql.username=postgres
db.pgsql.password=123456
</code></pre>
<h3 id="定义模型---define-a-model">定义模型 - define a model</h3>
<p><code>app/models/user.go</code> 文件</p>
<pre><code class="language-go">package models

import (
    &quot;github.com/goal-web/database/table&quot;
    &quot;github.com/goal-web/supports/class&quot;
)

// UserClass 这个类变量，以后大有用处
var UserClass = class.Make(new(User))

// UserModel 返回 table 实例，继承自查询构造器并且实现了所有 future
func UserModel() *table.Table {
    return table.Model(UserClass, &quot;users&quot;)
}

// User 模型结构体
type User struct {
    Id       int64  `json:&quot;id&quot;`
    NickName string `json:&quot;name&quot;`
}
</code></pre>
<h3 id="用法---method-of-use">用法 - method of use</h3>
<pre><code class="language-go">package tests

import (
    &quot;fmt&quot;
    &quot;github.com/goal-web/contracts&quot;
    &quot;github.com/goal-web/database/table&quot;
    &quot;github.com/goal-web/example/models&quot;
    &quot;github.com/stretchr/testify/assert&quot;
    &quot;testing&quot;
)

func getQuery(name string) contracts.QueryBuilder {
    // 测试用例环境下的简易 goal 应用启动
    app := initApp(&quot;/Users/qbhy/project/go/goal-web/goal/tests&quot;)

    //return  table.Query(&quot;users&quot;) 返回 table 实例，使用默认连接
    //tx, _ := app.Get(&quot;db&quot;).(contracts.DBConnection).Begin()
    //return table.WithTX(&quot;users&quot;, tx) // 事物环境下执行

    //return table.WithConnection(name, &quot;sqlite&quot;) // 返回指定连接的 table 实例，使用连接名
    return table.WithConnection(name, app.Get(&quot;db&quot;).(contracts.DBConnection)) // 也可以指定连接实例
}

// TestTableQuery 测试不带模型的 table 查询，类似 laravel 的 DB::table()
func TestTableQuery(t *testing.T) {

    getQuery(&quot;users&quot;).Delete()

    // 不设置模型的情况下，返回 contracts.Fields
    user := getQuery(&quot;users&quot;).Create(contracts.Fields{
        &quot;name&quot;: &quot;qbhy&quot;,
    }).(contracts.Fields)

    fmt.Println(user)
    userId := user[&quot;id&quot;].(int64)
    // 判断插入是否成功
    assert.True(t, userId &gt; 0)

    // 获取数据总量
    assert.True(t, getQuery(&quot;users&quot;).Count() == 1)

    // 修改数据
    num := getQuery(&quot;users&quot;).Where(&quot;name&quot;, &quot;qbhy&quot;).Update(contracts.Fields{
        &quot;name&quot;: &quot;goal&quot;,
    })
    assert.True(t, num == 1)
    // 判断修改后的数据
    user = getQuery(&quot;users&quot;).Where(&quot;name&quot;, &quot;goal&quot;).First().(contracts.Fields)

    err := getQuery(&quot;users&quot;).Chunk(10, func(collection contracts.Collection, page int) error {
        assert.True(t, collection.Len() == 1)
        fmt.Println(collection.ToJson())
        return nil
    })

    assert.Nil(t, err)

    assert.True(t, user[&quot;id&quot;] == userId)
    assert.True(t, user[&quot;name&quot;] == &quot;goal&quot;)
    assert.True(t, getQuery(&quot;users&quot;).Find(userId).(contracts.Fields)[&quot;id&quot;] == userId)
    assert.True(t, getQuery(&quot;users&quot;).Where(&quot;id&quot;, userId).Delete() == 1)
    assert.Nil(t, getQuery(&quot;users&quot;).Find(userId))
}

func TestModel(t *testing.T) {
    initApp(&quot;/Users/qbhy/project/go/goal-web/goal/tests&quot;)

    fmt.Println(&quot;用table查询：&quot;,
        getQuery(&quot;users&quot;).Get().Map(func(user contracts.Fields) {
            fmt.Println(&quot;用table查询&quot;, user)
        }).ToJson()) // query 返回 Collection&lt;contracts.Fields&gt;

    user := models.UserModel().Create(contracts.Fields{
        &quot;name&quot;: &quot;qbhy&quot;,
    }).(models.User)

    fmt.Println(&quot;创建后返回模型&quot;, user)

    fmt.Println(&quot;用table查询：&quot;,
        getQuery(&quot;users&quot;).Get().Map(func(user contracts.Fields) {
            fmt.Println(&quot;用table查询&quot;, user)
        }).ToJson()) // query 返回 Collection&lt;contracts.Fields&gt;

        // 用模型查询
    fmt.Println(models.UserModel(). // model 返回 Collection&lt;models.User&gt;
                    Get().
                    Map(func(user models.User) {
            fmt.Println(&quot;id:&quot;, user.Id)
        }).ToJson())

    fmt.Println(models.UserModel().Where(&quot;id&quot;, &quot;&gt;&quot;, 0).Delete())
}
</code></pre>
<blockquote>
<p>更多查询构造器用法请移步 <a href="https://github.com/goal-web/querybuilder">goal-web/querybuilder</a></p>
</blockquote>
<h3 id="在-goal-之外的框架使用---use-in-frameworks-other-than-goal">在 goal 之外的框架使用 - use in frameworks other than goal</h3>
<pre><code class="language-golang">// TestMysqlDatabaseWithoutApplication 只需要给给 table 包设置一个可用的 contracts.DBFactory 即可正常使用 table 下面的数据库操作方法
func TestMysqlDatabaseWithoutApplication(t *testing.T) {
    table.SetFactory(database.NewFactory(database.Config{
        Default: &quot;mysql&quot;,
        Connections: map[string]contracts.Fields{
            &quot;mysql&quot;: {
                &quot;driver&quot;:    &quot;mysql&quot;,
                &quot;host&quot;:      &quot;localhost&quot;,
                &quot;port&quot;:      &quot;3306&quot;,
                &quot;database&quot;:  &quot;goal&quot;,
                &quot;username&quot;:  &quot;root&quot;,
                &quot;password&quot;:  &quot;123456&quot;,
                &quot;charset&quot;:   &quot;utf8mb4&quot;,
                &quot;collation&quot;: &quot;utf8mb4_unicode_ci&quot;,
            },
        },
    }, nil))

    assert.True(t, table.Query(&quot;users&quot;).Count() == 0)

    user := table.Query(&quot;users&quot;).Create(contracts.Fields{
        &quot;name&quot;: &quot;testing&quot;,
    })
    assert.NotNil(t, user)
    assert.True(t, user.(contracts.Fields)[&quot;name&quot;] == &quot;testing&quot;)
    assert.True(t, table.Query(&quot;users&quot;).Count() == 1)
    table.Query(&quot;users&quot;).Where(&quot;name&quot;, &quot;testing&quot;).Delete()
    assert.True(t, table.Query(&quot;users&quot;).Count() == 0)
}
</code></pre>
<p><a href="https://github.com/goal-web/goal">goal-web</a><br><a href="https://github.com/goal-web/database">goal-web/database</a><br><a href="mailto:&#x71;&#x62;&#104;&#x79;&#x30;&#x37;&#x31;&#x35;&#x40;&#x71;&#x71;&#46;&#99;&#111;&#109;">&#x71;&#x62;&#104;&#x79;&#x30;&#x37;&#x31;&#x35;&#x40;&#x71;&#x71;&#46;&#99;&#111;&#109;</a></p>

            ]]>
        </content>
    </entry>
    <entry>
        <title>QueryBuilder - 查询构造器组件</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/querybuilder-cha-xun-gou-zao-qi-zu-jian.html"/>
        <id>https://goal-web.com/querybuilder-cha-xun-gou-zao-qi-zu-jian.html</id>
            <category term="goal组件"/>

        <updated>2022-03-11T00:12:54+08:00</updated>
            <summary>
                <![CDATA[
                    Goal/QueryBuilder Goal 的数据库查询构造器为创建和运行数据库查询提供了一个方便的接口。它可以用于支持大部分数据库操作，并与 Goal 支持的所有数据库系统完美运行。并且大量参考了 Laravel 的查询构造器设计，你几乎可以在这个库找到所有与 Laravel 对应的方法。 Goal 的查询构造器实现了类似 PDO 参数绑定的形式，来保护您的应用程序免受 SQL 注入攻击。因此不必清理因参数绑定而传入的字符串。查询构造器会返回你想要的 SQL 语句以及绑定参数。 $ go get github.com/goal-web/querybuilder 运行数据库查询 - usage 根据条件从表中检索出数据 - query 你可以使用 NewQuery 方法来开始查询。该方法为给定的表返回一个查询构造器实例，允许你在查询上链式调用更多的约束，最后使用 get 方法获取结果： package querybuilder import ( &quot;fmt&quot; ) func TestSimpleQueryBuilder() { query := NewQuery(&quot;users&quot;). Where(&quot;name&quot;,&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h1 id="goalquerybuilder">Goal/QueryBuilder</h1>
<p>Goal 的数据库查询构造器为创建和运行数据库查询提供了一个方便的接口。它可以用于支持大部分数据库操作，并与 Goal 支持的所有数据库系统完美运行。并且大量参考了 <code>Laravel</code> 的查询构造器设计，你几乎可以在这个库找到所有与 <code>Laravel</code> 对应的方法。</p>
<p>Goal 的查询构造器实现了类似 PDO 参数绑定的形式，来保护您的应用程序免受 SQL 注入攻击。因此不必清理因参数绑定而传入的字符串。查询构造器会返回你想要的 SQL 语句以及绑定参数。</p>
<h2 id="安装---install">安装 - install</h2>
<pre><code class="language-bash">$ go get github.com/goal-web/querybuilder
</code></pre>
<h2 id="运行数据库查询---usage">运行数据库查询 - usage</h2>
<h3 id="根据条件从表中检索出数据---query">根据条件从表中检索出数据 - query</h3>
<p>你可以使用 <code>NewQuery</code> 方法来开始查询。该方法为给定的表返回一个查询构造器实例，允许你在查询上链式调用更多的约束，最后使用 get 方法获取结果：</p>
<pre><code class="language-golang">package querybuilder
import (
    &quot;fmt&quot;
)

func TestSimpleQueryBuilder() {
    query := NewQuery(&quot;users&quot;).
        Where(&quot;name&quot;, &quot;qbhy&quot;).
        Where(&quot;age&quot;, &quot;&gt;&quot;, 18).
        Where(&quot;gender&quot;, &quot;!=&quot;, 0).
        OrWhere(&quot;amount&quot;, &quot;&gt;=&quot;, 100).
        WhereIsNull(&quot;avatar&quot;)
    
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    // select * from users where name = ? and age &gt; ? and gender != ? and avatar is null or amount &gt;= ?
    // [qbhy 18 0 100]
}
</code></pre>
<blockquote>
<p>你也可以通过 <code>SelectSql</code> 方法一次性获取你想要的参数。
例如：sql, bindings := NewQuery(“users”).Where(“gender”, 1).SelectSql()</p>
</blockquote>
<h3 id="插入语句---insert">插入语句 - insert</h3>
<p>你可以通过 <code>InsertSql</code> 或者 <code>CreateSql</code> 很方便的生成插入语句。</p>
<pre><code class="language-golang">package querybuilder

import (
    &quot;fmt&quot;
    &quot;github.com/goal-web/contracts&quot;
)

// TestInsertSql 批量插入数据
func TestInsertSql() {
    sql, bindings := NewQuery(&quot;users&quot;).InsertSql([]contracts.Fields{
        {&quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000},
        {&quot;name&quot;: &quot;goal&quot;, &quot;age&quot;: 18, &quot;money&quot;: 10},
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    // insert into users (name,age,money) values (?,?,?),(?,?,?)
    // [qbhy 18 100000000000 goal 18 10]
}
// TestCreateSql 插入单个数据
func TestCreateSql() {
    sql, bindings := NewQuery(&quot;users&quot;).CreateSql(contracts.Fields{
        &quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000,
    })
    fmt.Println(sql)
    fmt.Println(bindings) 
    // insert into users (name,age,money) values (?,?,?) 
    //[qbhy 18 100000000000]
}
</code></pre>
<h3 id="更新语句">更新语句</h3>
<p>你可以通过 <code>UpdateSql</code> 很方便的生成更新语句。</p>
<pre><code class="language-golang">package querybuilder

import (
    &quot;fmt&quot;
    &quot;github.com/goal-web/contracts&quot;
)

func TestUpdateSql() {
    sql, bindings := NewQuery(&quot;users&quot;).Where(&quot;id&quot;, &quot;&gt;&quot;, 1).UpdateSql(contracts.Fields{
        &quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000,
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    // update users set money = ?,name = ?,age = ? where id &gt; ?
    // [qbhy 18 100000000000 1]
}
</code></pre>
<h3 id="删除语句---delete">删除语句 - delete</h3>
<p>你可以通过 <code>DeleteSql</code> 很方便的生成删除语句。</p>
<pre><code class="language-golang">package querybuilder

import (
    &quot;fmt&quot;
)

func TestDeleteSql() {
    sql, bindings := NewQuery(&quot;users&quot;).Where(&quot;id&quot;, &quot;&gt;&quot;, 1).DeleteSql()
    fmt.Println(sql)
    fmt.Println(bindings)
    // delete from users where id &gt; ?
    // [1]
}
</code></pre>
<h2 id="更多高级用法---more">更多高级用法 - more</h2>
<p>支持 where嵌套、子查询、连表、连子查询等更多高级用法</p>
<pre><code class="language-go">package tests

import (
    &quot;fmt&quot;
    &quot;github.com/goal-web/contracts&quot;
    builder &quot;github.com/goal-web/querybuilder&quot;
    &quot;github.com/stretchr/testify/assert&quot;
    &quot;github.com/xwb1989/sqlparser&quot;
    &quot;testing&quot;
)

func TestSimpleQueryBuilder(t *testing.T) {
    query := builder.NewQuery(&quot;users&quot;)
    query.Where(&quot;name&quot;, &quot;qbhy&quot;).
        Where(&quot;age&quot;, &quot;&gt;&quot;, 18).
        Where(&quot;gender&quot;, &quot;!=&quot;, 0, contracts.Or).
        OrWhere(&quot;amount&quot;, &quot;&gt;=&quot;, 100).
        WhereIsNull(&quot;avatar&quot;)
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())

    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestJoinQueryBuilder(t *testing.T) {
    query := builder.NewQuery(&quot;users&quot;).
        Join(&quot;accounts&quot;, &quot;accounts.user_id&quot;, &quot;=&quot;, &quot;users.id&quot;).
        JoinSub(func() contracts.QueryBuilder {
            return builder.NewQuery(&quot;users&quot;).
                Where(&quot;level&quot;, &quot;&gt;&quot;, 5)
        }, &quot;vip_users&quot;, &quot;vip_users.id&quot;, &quot;=&quot;, &quot;users.id&quot;).
        //WhereIn(&quot;gender&quot;, &quot;1,2&quot;).
        WhereIn(&quot;gender&quot;, []int{1, 2})
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestFromSubQueryBuilder(t *testing.T) {
    query := builder.FromSub(func() contracts.QueryBuilder {
        return builder.NewQuery(&quot;users&quot;).
            Where(&quot;level&quot;, &quot;&gt;&quot;, 5)
    }, &quot;vip_users&quot;).
        //WhereIn(&quot;gender&quot;, &quot;1,2&quot;).
        WhereIn(&quot;gender&quot;, []int{1, 2})
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestDistinctQueryBuilder(t *testing.T) {
    query := builder.NewQuery(&quot;users&quot;).
        Distinct().
        Join(&quot;accounts&quot;, &quot;accounts.user_id&quot;, &quot;=&quot;, &quot;users.id&quot;).
        Where(&quot;gender&quot;, &quot;!=&quot;, 0, contracts.Or)
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestUpdateSql(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).Where(&quot;id&quot;, &quot;&gt;&quot;, 1).UpdateSql(contracts.Fields{
        &quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000,
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestSelectSub(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).Where(&quot;id&quot;, &quot;&gt;&quot;, 1).
        SelectSub(func() contracts.QueryBuilder {
            return builder.NewQuery(&quot;accounts&quot;).Where(&quot;accounts.id&quot;, &quot;users.id&quot;).WithCount()
        }, &quot;accounts_count&quot;).
        Join(&quot;accounts&quot;, &quot;accounts.user_id&quot;, &quot;=&quot;, &quot;users.id&quot;).
        SelectSql()
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestWhereNotExists(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).
        Where(&quot;id&quot;, &quot;&gt;&quot;, 1).
        WhereNotExists(func() contracts.QueryBuilder {
            return builder.NewQuery(&quot;users&quot;).Select(&quot;id&quot;).Where(&quot;age&quot;, &quot;&gt;&quot;, 18)
        }).
        SelectSql()
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestCount(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).Where(&quot;id&quot;, &quot;&gt;&quot;, 1).WithCount(&quot;id&quot;).SelectSql()
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestDeleteSql(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).Where(&quot;id&quot;, &quot;&gt;&quot;, 1).DeleteSql()
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestInsertSql(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).InsertSql([]contracts.Fields{
        {&quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000},
        {&quot;name&quot;: &quot;goal&quot;, &quot;age&quot;: 18, &quot;money&quot;: 10},
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestInsertIgnoreSql(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).InsertIgnoreSql([]contracts.Fields{
        {&quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000},
        {&quot;name&quot;: &quot;goal&quot;, &quot;age&quot;: 18, &quot;money&quot;: 10},
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}
func TestInsertReplaceSql(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).InsertReplaceSql([]contracts.Fields{
        {&quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000},
        {&quot;name&quot;: &quot;goal&quot;, &quot;age&quot;: 18, &quot;money&quot;: 10},
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}

func TestCreateSql(t *testing.T) {
    sql, bindings := builder.NewQuery(&quot;users&quot;).CreateSql(contracts.Fields{
        &quot;name&quot;: &quot;qbhy&quot;, &quot;age&quot;: 18, &quot;money&quot;: 100000000000,
    })
    fmt.Println(sql)
    fmt.Println(bindings)
    _, err := sqlparser.Parse(sql)
    assert.Nil(t, err, err)
}

func TestBetweenQueryBuilder(t *testing.T) {
    query := builder.NewQuery(&quot;users&quot;).
        Join(&quot;accounts&quot;, &quot;accounts.user_id&quot;, &quot;=&quot;, &quot;users.id&quot;).
        WhereFunc(func(b contracts.QueryBuilder) {
            // 高瘦
            b.WhereBetween(&quot;height&quot;, []int{180, 200}).
                WhereBetween(&quot;weight&quot;, []int{50, 60}).
                WhereIn(&quot;id&quot;, []int{1, 2, 3, 4, 5})
        }).OrWhereFunc(func(b contracts.QueryBuilder) {
        // 矮胖
        b.WhereBetween(&quot;height&quot;, []int{140, 160}).
            WhereBetween(&quot;weight&quot;, []int{70, 140}).
            WhereNotBetween(&quot;id&quot;, []int{1, 5})
    })
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestUnionQueryBuilder(t *testing.T) {
    query := builder.NewQuery(&quot;users&quot;).
        Join(&quot;accounts&quot;, &quot;accounts.user_id&quot;, &quot;=&quot;, &quot;users.id&quot;).
        Where(&quot;gender&quot;, &quot;!=&quot;, 0, contracts.Or).
        UnionByProvider(
            func() contracts.QueryBuilder {
                return builder.NewQuery(&quot;peoples&quot;).Where(&quot;id&quot;, 5)
            },
        ).
        Union(
            builder.NewQuery(&quot;accounts&quot;),
        ).
        UnionAll(
            builder.NewQuery(&quot;members&quot;),
        ).
        UnionAll(
            builder.NewQuery(&quot;students&quot;),
        )
    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestComplexQueryBuilder(t *testing.T) {

    query := builder.NewQuery(&quot;users&quot;)
    query.
        FromSub(func() contracts.QueryBuilder {
            return builder.NewQuery(&quot;users&quot;).Where(&quot;amount&quot;, &quot;&gt;&quot;, 1000)
        }, &quot;rich_users&quot;).
        Join(&quot;accounts&quot;, &quot;users.id&quot;, &quot;=&quot;, &quot;accounts.user_id&quot;).
        WhereFunc(func(b contracts.QueryBuilder) {
            b.Where(&quot;name&quot;, &quot;goal&quot;).
                Where(&quot;age&quot;, &quot;&lt;&quot;, &quot;18&quot;).
                WhereIn(&quot;id&quot;, []int{1, 2})
        }).
        OrWhereFunc(func(b contracts.QueryBuilder) {
            b.Where(&quot;name&quot;, &quot;qbhy&quot;).
                Where(&quot;age&quot;, &quot;&gt;&quot;, 18).
                WhereNotIn(&quot;id&quot;, []int{1, 2})
        }).
        OrWhereNotIn(&quot;id&quot;, []int{6, 7}).
        OrWhereNotNull(&quot;id&quot;).
        OrderByDesc(&quot;age&quot;).
        OrderBy(&quot;id&quot;).
        GroupBy(&quot;country&quot;)

    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}

func TestGroupByQueryBuilder(t *testing.T) {

    query := builder.
        FromSub(func() contracts.QueryBuilder {
            return builder.NewQuery(&quot;users&quot;).Where(&quot;amount&quot;, &quot;&gt;&quot;, 1000)
        }, &quot;rich_users&quot;).
        GroupBy(&quot;country&quot;).
        Having(&quot;count(rich_users.id)&quot;, &quot;&lt;&quot;, 1000).   // 人口少
        OrHaving(&quot;sum(rich_users.amount)&quot;, &quot;&lt;&quot;, 100) // 或者穷

    fmt.Println(query.ToSql())
    fmt.Println(query.GetBindings())
    _, err := sqlparser.Parse(query.ToSql())
    assert.Nil(t, err, err)
}
</code></pre>
<p>正如开头所说，你可以在这里找到几乎所有与 <code>Laravel</code> 对应的查询构造器方法，也可以在 <a href="https://github.com/goal-web/querybuilder/blob/master/database_test.go">测试文件</a> 中找到更多用法</p>
<p><a href="https://github.com/goal-web/querybuilder">goal/query-builder</a><br><a href="mailto:&#113;&#98;&#104;&#121;&#48;&#x37;&#x31;&#53;&#64;&#x71;&#113;&#46;&#99;&#111;&#x6d;">&#113;&#98;&#104;&#121;&#48;&#x37;&#x31;&#53;&#64;&#x71;&#113;&#46;&#99;&#111;&#x6d;</a></p>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Auth 组件</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/auth-zu-jian.html"/>
        <id>https://goal-web.com/auth-zu-jian.html</id>
            <category term="goal组件"/>

        <updated>2022-03-11T00:00:46+08:00</updated>
            <summary>
                <![CDATA[
                    Goal-web/auth goal-web/auth goal 框架的用户认证组件，你可以在 http、websocket 或者其他环境使用。 $ go get github.com/goal-web/auth 使用 - usage goal 的脚手架自带了绝大多数开发一个 web 应用的所需要的功能和组件，当然这也包括了认证组件。一般情况下，我们只需要在 .env 修改自己的认证配置即可，比如 jwt 驱动的 secret、session 驱动的 session_key。 默认情况下，config/auth.go 配置文件像下面那样，默认添加了 jwt、session 两个守卫配置 package config import ( &quot;github.com/goal-web/auth&quot; &quot;github.com/goal-web/contracts&quot; &quot;github.com/goal-web/example/models&quot; &quot;github.com/golang-jwt/jwt&quot; ) func init() { configs[&quot;auth&quot;] = func(env contracts.Env) interface{}&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h1 id="goal-webauth">Goal-web/auth</h1>
<p><a href="https://github.com/goal-web/auth">goal-web/auth</a><br>goal 框架的用户认证组件，你可以在 <code>http</code>、<code>websocket</code> 或者其他环境使用。</p>
<h2 id="安装---install">安装 - install</h2>
<pre><code class="language-bash">$ go get github.com/goal-web/auth
</code></pre>
<h2 id="使用---usage">使用 - usage</h2>
<p>goal 的脚手架自带了绝大多数开发一个 web 应用的所需要的功能和组件，当然这也包括了认证组件。一般情况下，我们只需要在 .env 修改自己的认证配置即可，比如 <code>jwt</code> 驱动的 secret、<code>session</code> 驱动的 session_key。</p>
<h3 id="配置---config">配置 - config</h3>
<p>默认情况下，<code>config/auth.go</code> 配置文件像下面那样，默认添加了 <code>jwt</code>、<code>session</code> 两个守卫配置</p>
<pre><code class="language-go">package config

import (
    &quot;github.com/goal-web/auth&quot;
    &quot;github.com/goal-web/contracts&quot;
    &quot;github.com/goal-web/example/models&quot;
    &quot;github.com/golang-jwt/jwt&quot;
)

func init() {
    configs[&quot;auth&quot;] = func(env contracts.Env) interface{} {
        return auth.Config{
            Defaults: struct {
                Guard string
                User  string
            }{
                Guard: env.StringOption(&quot;auth.default&quot;, &quot;jwt&quot;), // 默认守卫
                User:  env.StringOption(&quot;auth.user&quot;, &quot;db&quot;), // 默认用户提供者
            },
            Guards: map[string]contracts.Fields{
                &quot;jwt&quot;: { // 守卫名称
                    &quot;driver&quot;:   &quot;jwt&quot;, // 驱动,目前支持jwt、session
                    &quot;secret&quot;:   env.GetString(&quot;auth.jwt.secret&quot;), // jwt 签名所需的 secret，不同的守卫建议不同的secret
                    &quot;method&quot;:   jwt.SigningMethodHS256, // jwt 签名方法
                    &quot;lifetime&quot;: 60 * 60 * 24, // token有效时长，单位：秒
                    &quot;provider&quot;: &quot;db&quot;, // 用户提供者名
                },
                &quot;session&quot;: { // 守卫名称
                    &quot;driver&quot;:      &quot;session&quot;, // 驱动名
                    &quot;provider&quot;:    &quot;db&quot;, // 用户提供者名
                    // session驱动所需的参数，如果应用需要配置多个session驱动的守卫，那么需要配置不一样的 session_key
                    &quot;session_key&quot;: env.StringOption(&quot;auth.session.key&quot;, &quot;auth_session&quot;), 
                },
            },
            Users: map[string]contracts.Fields{ // 用户提供者，目前只支持 db
                &quot;db&quot;: { // 用户提供者名称
                    &quot;driver&quot;: &quot;db&quot;, // 驱动名称
                    &quot;model&quot;:  models.UserModel, // 用户模型
                },
            },
        }
    }
}
</code></pre>
<p><code>.env</code> 的数据库相关配置</p>
<pre><code class="language-bash">auth.jwt.secret=jwt_secret
auth.default=jwt
</code></pre>
<h3 id="定义模型---define-a-model">定义模型 - define a model</h3>
<p><code>app/models/user.go</code> 文件</p>
<pre><code class="language-go">package models

import (
    &quot;github.com/goal-web/database/table&quot;
    &quot;github.com/goal-web/supports/class&quot;
)

var (
    UserModel = table.NewModel(class.Make(new(User)), &quot;users&quot;)
)

func UserQuery() *table.Table {
    return table.FromModel(UserModel)
}

type User struct {
    Id       string `json:&quot;id&quot;`
    NickName string `json:&quot;name&quot;`
}

// GetId 实现了 contracts.Authenticatable 接口，此方法必不可少
func (u User) GetId() string {
    return u.Id
}
</code></pre>
<h3 id="用法---method-of-use">用法 - method of use</h3>
<pre><code class="language-go">package controllers

import (
    &quot;github.com/goal-web/contracts&quot;
    &quot;github.com/goal-web/example/models&quot;
)

func LoginExample(guard contracts.Guard) contracts.Fields {
    //  这是伪代码
    user := models.UserQuery().First().(models.User)

    return contracts.Fields{
        &quot;token&quot;: guard.Login(user), // jwt 返回 token，session 返回 true
    }
}

func GetCurrentUser(guard contracts.Guard) interface{} {
    return contracts.Fields{
        &quot;user&quot;: guard.User(), // 已登录返回用户模型，否则返回 nil
    }
}
</code></pre>
<h3 id="使用中间件">使用中间件</h3>
<pre><code class="language-go">package routes

import (
    &quot;github.com/goal-web/auth&quot;
    &quot;github.com/goal-web/contracts&quot;
    &quot;github.com/goal-web/example/app/http/controllers&quot;
    &quot;github.com/goal-web/session&quot;
)

func ApiRoutes(router contracts.Router) {
    
    v1 := router.Group(&quot;&quot;, session.StartSession)
    
    // 直接应用在路由上
    v1.Get(&quot;/myself&quot;, controllers.GetCurrentUser, auth.Guard(&quot;jwt&quot;))
    
    // 应用在路由组上
    authRouter := v1.Group(&quot;&quot;, auth.Guard(&quot;jwt&quot;))
    authRouter.Get(&quot;/myself&quot;, controllers.GetCurrentUser, auth.Guard(&quot;jwt&quot;))

}
</code></pre>
<h3 id="守卫api---guard-api">守卫API - guard api</h3>
<pre><code class="language-go">type Guard interface {
    Once(user Authenticatable)
    User() Authenticatable
    GetId() string
    Check() bool
    Guest() bool
    Login(user Authenticatable) interface{}
}
</code></pre>
<h3 id="扩展守卫和用户提供者---extension">扩展守卫和用户提供者 - extension</h3>
<p>这部分内容比较多，这里暂时不展开讲，后面会专门录视频介绍，欢迎大家点赞订阅</p>
<h3 id="在-goal-之外的框架使用---use-in-frameworks-other-than-goal">在 goal 之外的框架使用 - use in frameworks other than goal</h3>
<p>这部分内容比较多，这里暂时不展开讲，后面会专门录视频介绍，欢迎大家点赞订阅</p>
<p><a href="https://github.com/goal-web/goal">goal-web</a><br><a href="https://github.com/goal-web/auth">goal-web/auth</a><br><a href="mailto:&#x71;&#x62;&#104;&#x79;&#x30;&#55;&#49;&#53;&#64;&#x71;&#113;&#46;&#99;&#111;&#109;">&#x71;&#x62;&#104;&#x79;&#x30;&#55;&#49;&#53;&#64;&#x71;&#113;&#46;&#99;&#111;&#109;</a></p>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Goal 应用目录结构</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/goal-ying-yong-mu-lu-jie-gou.html"/>
        <id>https://goal-web.com/goal-ying-yong-mu-lu-jie-gou.html</id>

        <updated>2022-03-09T10:54:48+08:00</updated>
            <summary>
                <![CDATA[
                    app 应用代码 console 控制台相关代码 commands 定义命令行 kernel.go 默认 console 内核实现，可以在这里定义计划任务 dao 数据操作代码 events 事件定义 listeners 事件监听者 jobs 任务代码，用于投递到 queue http web相关代码 controllers 控制器目录 middlewares 中间件目录 requests 自定义请求目录 sse 服务端事件推送相关代码及示例 models 数据模型定义 policies gate策略定义 services 微服务相关代码 providers 一些应用内的服务提供者 app.go 一些基本的应用初始化代码 gate.go 用于注册gate策略 micro.go 用于注册微服务 websocket ws相关代码和示例config&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h2 id="app-应用代码">app 应用代码</h2>
<ul>
<li>console 控制台相关代码<ul>
<li>commands 定义命令行</li>
<li>kernel.go 默认 console 内核实现，可以在这里定义计划任务</li>
</ul>
</li>
<li>dao 数据操作代码</li>
<li>events 事件定义</li>
<li>listeners 事件监听者</li>
<li>jobs 任务代码，用于投递到 queue</li>
<li>http web相关代码<ul>
<li>controllers 控制器目录</li>
<li>middlewares 中间件目录</li>
<li>requests 自定义请求目录</li>
<li>sse 服务端事件推送相关代码及示例</li>
</ul>
</li>
<li>models 数据模型定义</li>
<li>policies gate策略定义</li>
<li>services 微服务相关代码</li>
<li>providers 一些应用内的服务提供者<ul>
<li>app.go 一些基本的应用初始化代码</li>
<li>gate.go 用于注册gate策略</li>
<li>micro.go 用于注册微服务</li>
</ul>
</li>
<li>websocket ws相关代码和示例<h2 id="config-配置文件">config 配置文件</h2>
</li>
<li>app.go 应用配置</li>
<li>auth.go 用户认证配置</li>
<li>database.go 数据库配置</li>
<li>bloomfilter.go 布隆过滤器配置</li>
<li>cache.go 缓存配置</li>
<li>http.go http配置</li>
<li>mail.go 邮件配置</li>
<li>queue.go 队列配置</li>
<li>session.go 会话配置</li>
<li>micro.go 微服务配置</li>
<li>filesystem.go 文件系统配置</li>
<li>redis.go redis配置</li>
<li>serialization.go 序列化器配置(job需要在此文件配置)</li>
<li>websocket.go ws 配置<h2 id="routes-路由文件">routes 路由文件</h2>
</li>
<li>api.go http路由</li>
<li>websocket.go ws 路由</li>
<li>sse.go 服务端事件推送路由<h2 id="database-数据库相关">database 数据库相关</h2>
<h2 id="tests-测试代码">tests 测试代码</h2>
<h2 id="storage-存储目录">storage 存储目录</h2>
</li>
</ul>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Goal - 快速开始</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/goal-kuai-su-kai-shi.html"/>
        <id>https://goal-web.com/goal-kuai-su-kai-shi.html</id>

        <updated>2022-03-09T10:43:24+08:00</updated>
            <summary>
                <![CDATA[
                    要求 - requirements go 1.17+ make (可选) 下载 - download $ git clone https://github.com/goal-web/goal &amp;&amp; cd goal 启动 - start $ make run # or $ go mod tidy &amp;&amp; go run main.go run goal 程序编译后运行方式是 ./goal run ，run 只是一个定义好的 goal cli 命令 $ curl&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h2 id="要求---requirements">要求 - requirements</h2>
<ul>
<li>go 1.17+</li>
<li>make (可选)</li>
</ul>
<h2 id="下载---download">下载 - download</h2>
<pre><code class="language-sh">$ git clone https://github.com/goal-web/goal &amp;&amp; cd goal
</code></pre>
<h2 id="启动---start">启动 - start</h2>
<pre><code class="language-sh">$ make run
# or
$ go mod tidy &amp;&amp; go run main.go run
</code></pre>
<blockquote>
<p>goal 程序编译后运行方式是 ./goal run ，run 只是一个定义好的 goal cli 命令</p>
</blockquote>
<h2 id="访问---visit">访问 - visit</h2>
<pre><code class="language-sh">$ curl localhost:8008
</code></pre>
<blockquote>
<p>hello, goal.</p>
</blockquote>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Goal 组件</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/goal-features.html"/>
        <id>https://goal-web.com/goal-features.html</id>
            <category term="goal组件"/>

        <updated>2022-03-12T11:52:08+08:00</updated>
            <summary>
                <![CDATA[
                    核心组件 鉴于部分朋友看到 goal 长长的组件列表后，认为 goal 是个重型框架，许多场景不适合使用。我认为有必要说明一下，goal 的组件搭配其实是相当灵活的，goal 除了核心组件之外的其他组件都是可选的，包括所有主要组件。goal 允许你自由组装你的 goal 应用，例如 console + database 可以写一个数据库迁移应用，console + email 可以写一个邮件发送工具，http + database 可以写一个 CURD 应用，以此类推，你可以通过各种组合来完善你的应用，同时 goal 也提供了一个默认的 goal 应用模板 contracts - 契约 container - 容器 application - 应用 config - 配置 supports - 各种支持库和工具库 主要组件 pipeline -&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h2 id="核心组件">核心组件</h2>
<p>鉴于部分朋友看到 goal 长长的组件列表后，认为 goal 是个重型框架，许多场景不适合使用。我认为有必要说明一下，goal 的组件搭配其实是相当灵活的，goal 除了核心组件之外的其他组件都是可选的，包括所有主要组件。goal 允许你自由组装你的 goal 应用，例如 console + database 可以写一个数据库迁移应用，console + email 可以写一个邮件发送工具，http + database 可以写一个 CURD 应用，以此类推，你可以通过各种组合来完善你的应用，同时 goal 也提供了一个默认的 <a href="https://github.com/goal-web/goal">goal 应用模板</a></p>
<ul>
<li><a href="https://github.com/goal-web/contracts">contracts - 契约</a></li>
<li><a href="https://github.com/goal-web/container">container - 容器</a></li>
<li><a href="https://github.com/goal-web/application">application - 应用</a></li>
<li><a href="https://github.com/goal-web/application">config - 配置</a></li>
<li><a href="https://github.com/goal-web/supports">supports - 各种支持库和工具库</a></li>
</ul>
<h2 id="主要组件">主要组件</h2>
<ul>
<li><a href="https://github.com/goal-web/pipeline">pipeline - 洋葱模型管道</a></li>
<li><a href="https://github.com/goal-web/collection">collection - 集合操作</a></li>
<li><a href="https://github.com/goal-web/hashing">hashing - 哈希库</a></li>
<li><a href="https://github.com/goal-web/ratelimiter">ratelimiter - 限流器</a></li>
<li><a href="https://github.com/goal-web/bloomfilter">bloomfilter - 布隆过滤器，支持文件和redis</a></li>
<li><a href="https://github.com/goal-web/encryption">encryption - 加密库</a></li>
<li><a href="https://github.com/goal-web/serialization">serialization - 序列化库</a></li>
<li><a href="https://github.com/goal-web/console">console - 控制台库，支持计划任务、自定义命令</a></li>
<li><a href="https://github.com/goal-web/redis">redis</a></li>
<li><a href="https://github.com/goal-web/cache">cache - 缓存</a></li>
<li><a href="https://github.com/goal-web/querybuilder">querybuilder - sql查询构造器</a></li>
<li><a href="https://github.com/goal-web/database">database - 数据库组件</a></li>
<li><a href="https://github.com/goal-web/auth">auth - 用户认证</a></li>
<li><a href="https://github.com/goal-web/http">http - http服务，含路由、sse</a></li>
<li><a href="https://github.com/goal-web/session">session - 会话服务</a></li>
<li><a href="https://github.com/goal-web/websocket">websocket - websocket库，依赖http库</a></li>
<li><a href="https://github.com/goal-web/queue">queue - 消息队列，支持kafka、nsq驱动</a></li>
<li><a href="https://github.com/goal-web/email">email - 邮件</a></li>
<li><a href="https://github.com/goal-web/filesystem">filesystem - 文件系统</a></li>
<li><a href="https://github.com/goal-web/events">events - 事件系统</a></li>
<li><a href="https://github.com/goal-web/micro">micro - 微服务封装，基于 go-micro</a></li>
</ul>
<h2 id="第三方-sdk">第三方 SDK</h2>
<ul>
<li><a href="https://github.com/qbhy/goal-alipay">支付宝sdk</a></li>
<li><a href="https://github.com/qbhy/goal-wechat">微信sdk</a></li>
<li><a href="https://github.com/qbhy/goal-aliyun">阿里云sdk</a></li>
<li>极光推送 sdk</li>
<li>字节跳动 sdk</li>
<li>QQ sdk</li>
<li>更多 SDK 。。。</li>
</ul>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Join Goal</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/join-goal.html"/>
        <id>https://goal-web.com/join-goal.html</id>

        <updated>2022-03-10T23:40:46+08:00</updated>
            <summary>
                <![CDATA[
                    参与项目 你可以通过以下方式参与到项目中来 微信群 QQ群
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h2 id="参与项目">参与项目</h2>
<p>你可以通过以下方式参与到项目中来</p>
<ul>
<li>完善已有模块（优化或者改bug）</li>
<li>完善或者修复测试用例</li>
<li>开发新的模块（比如标记为未完成的模块）</li>
<li>添加或者修改完善注释（用英语）</li>
<li>修改错别字或者不当用词（文档和代码都可以，比如变量命名）</li>
<li>帮助开发独立文档（readme是临时的，后面需要独立的文档项目）</li>
<li>开发扩展包（goal 的扩展相当容易，后面我会写教程，现阶段进群聊）</li>
<li>使用 goal 实现各种例子（放examples文件夹或者新建仓库在这里引用）</li>
<li>更多方式进群聊吧</li>
</ul>
<h2 id="交流">交流</h2>
<p>微信群<br><img loading="lazy" style="max-width: 200px" src="https://s2.loli.net/2022/03/03/n9jESh6r4e3WQsL.png" data-is-external-image="true" /><br>QQ群<br><img loading="lazy" style="max-width: 200px" src="https://s2.loli.net/2022/03/08/wAdeRgFZQUHaCXl.png" data-is-external-image="true" /></p>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Goal Framework</title>
        <author>
            <name>qbhy</name>
        </author>
        <link href="https://goal-web.com/goal-framework.html"/>
        <id>https://goal-web.com/goal-framework.html</id>

        <updated>2022-03-08T17:59:52+08:00</updated>
            <summary>
                <![CDATA[
                    goal 一个继承了 laravel 思想的 golang web 框架 goal 通过容器和服务提供者作为框架的核心，以 contracts 为桥梁，为开发者提供丰富的功能和服务，这点与 laravel 是相似的。 你可以通过以下方式参与到项目中来 微信群 QQ群
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h1 id="goal">goal</h1>
<p>一个继承了 laravel 思想的 golang web 框架</p>
<h2 id="框架特点">框架特点</h2>
<p>goal 通过容器和服务提供者作为框架的核心，以 contracts 为桥梁，为开发者提供丰富的功能和服务，这点与 laravel 是相似的。</p>
<ul>
<li>强大的容器</li>
<li>服务提供者</li>
<li>契约精神</li>
</ul>
<h2 id="链接">链接</h2>
<ul>
<li><a href="https://github.com/goal-web/goal">goal 仓库</a></li>
<li><a href="https://github.com/goal-web/goal/wiki/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">快速开始</a></li>
<li><a href="https://github.com/goal-web/goal/wiki/%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">目录结构</a></li>
</ul>
<h2 id="功能特性">功能特性</h2>
<ul>
<li><input checked="" disabled="" type="checkbox"> examples 各种程序的例子（还在完善中…）</li>
<li><input checked="" disabled="" type="checkbox"> contracts 定义模块接口</li>
<li><input checked="" disabled="" type="checkbox"> container 容器实现！！！</li>
<li><input checked="" disabled="" type="checkbox"> pipeline 简单但是很强大的洋葱模型的管道</li>
<li><input checked="" disabled="" type="checkbox"> supports 支持库<ul>
<li><input checked="" disabled="" type="checkbox"> logs 日志模块</li>
<li><input checked="" disabled="" type="checkbox"> collection 集合库</li>
<li><input checked="" disabled="" type="checkbox"> utils 工具库，封装了包含字符串处理、默认参数处理、类型转换、反射等工具函数</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> application 应用<ul>
<li><input checked="" disabled="" type="checkbox"> exceptions 异常处理模块</li>
<li><input checked="" disabled="" type="checkbox"> signal 信号监听，goal 实现了优雅关闭功能</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> config 配置模块</li>
<li><input checked="" disabled="" type="checkbox"> redis Redis模块</li>
<li><input checked="" disabled="" type="checkbox"> cache 缓存模块<ul>
<li><input checked="" disabled="" type="checkbox"> redis</li>
<li><input checked="" disabled="" type="checkbox"> memory 将数据存储在内存中，不支持持久化和分布式</li>
<li><input disabled="" type="checkbox"> memcached</li>
<li><input disabled="" type="checkbox"> file</li>
<li><input disabled="" type="checkbox"> database 数据库驱动</li>
<li><input disabled="" type="checkbox"> multi 高可用多级缓存</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> encryption 加密模块</li>
<li><input checked="" disabled="" type="checkbox"> hashing 哈希模块</li>
<li><input checked="" disabled="" type="checkbox"> validation 数据校验模块</li>
<li><input checked="" disabled="" type="checkbox"> mail 邮件模块</li>
<li><input checked="" disabled="" type="checkbox"> events 事件模块</li>
<li><input checked="" disabled="" type="checkbox"> filesystem 文件系统模块<ul>
<li><input checked="" disabled="" type="checkbox"> local 本地文件系统</li>
<li><input checked="" disabled="" type="checkbox"> qiniu 七牛文件系统</li>
<li><input disabled="" type="checkbox"> oss 阿里云文件系统</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> database 数据库操作模块<ul>
<li><input checked="" disabled="" type="checkbox"> query builder 查询构造器</li>
<li><input disabled="" type="checkbox"> seeders 数据填充</li>
<li><input checked="" disabled="" type="checkbox"> migration 数据迁移</li>
<li><input checked="" disabled="" type="checkbox"> drivers 数据库驱动<ul>
<li><input checked="" disabled="" type="checkbox"> mysql</li>
<li><input checked="" disabled="" type="checkbox"> postgresql</li>
<li><input checked="" disabled="" type="checkbox"> sqlite</li>
<li><input checked="" disabled="" type="checkbox"> clickhouse</li>
<li><input disabled="" type="checkbox"> sqlserver</li>
<li><input disabled="" type="checkbox"> oracle</li>
</ul>
</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> eloquent ORM模块，计划 golang 1.18 发布后完成，因为泛型</li>
<li><input checked="" disabled="" type="checkbox"> http http相关模块，请求、响应、中间件等<ul>
<li><input checked="" disabled="" type="checkbox"> sse server-sent-events模块(简称sse)</li>
<li><input checked="" disabled="" type="checkbox"> routing http 路由服务</li>
<li><input checked="" disabled="" type="checkbox"> session 会话服务<ul>
<li><input checked="" disabled="" type="checkbox"> cookie 将会话信息存储到加密的 cookie 中</li>
<li><input checked="" disabled="" type="checkbox"> redis</li>
<li><input disabled="" type="checkbox"> file</li>
<li><input disabled="" type="checkbox"> database</li>
<li><input disabled="" type="checkbox"> memcached</li>
</ul>
</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> console 命令行模块<ul>
<li><input checked="" disabled="" type="checkbox"> commands 自定义命令模块</li>
<li><input checked="" disabled="" type="checkbox"> scheduling 任务调度模块</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> auth 用户认证模块<ul>
<li><input checked="" disabled="" type="checkbox"> gate 用户授权模块</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> serialize 序列化模块<ul>
<li><input checked="" disabled="" type="checkbox"> json</li>
<li><input checked="" disabled="" type="checkbox"> xml</li>
<li><input checked="" disabled="" type="checkbox"> gob</li>
<li><input disabled="" type="checkbox"> protobuf</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> queue 消息队列模块<ul>
<li><input disabled="" type="checkbox"> redis</li>
<li><input checked="" disabled="" type="checkbox"> kafka</li>
<li><input checked="" disabled="" type="checkbox"> nsq</li>
<li><input disabled="" type="checkbox"> rocketMQ</li>
<li><input disabled="" type="checkbox"> rabbitMQ</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> rate limiter 限流器</li>
<li><input checked="" disabled="" type="checkbox"> bloom-filter 布隆过滤器<ul>
<li><input checked="" disabled="" type="checkbox"> file 持久化到文件</li>
<li><input checked="" disabled="" type="checkbox"> redis 通过 redis bit 实现的过滤器，支持分布式</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> websocket socket通信模块<ul>
<li><input disabled="" type="checkbox"> socket.io socket.io 实现</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> micro 远程调用模块（集成 go-micro）<ul>
<li><input checked="" disabled="" type="checkbox"> grpc</li>
<li><input checked="" disabled="" type="checkbox"> 服务发现</li>
<li><input checked="" disabled="" type="checkbox"> 负载均衡</li>
<li><input checked="" disabled="" type="checkbox"> 自定义 go-micro</li>
<li><input checked="" disabled="" type="checkbox"> <a href="https://github.com/goal-web/microdemo">微服务demo</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox"> 第三方sdk<ul>
<li><input checked="" disabled="" type="checkbox"> <a href="https://github.com/qbhy/goal-alipay">支付宝sdk</a></li>
<li><input checked="" disabled="" type="checkbox"> <a href="https://github.com/qbhy/goal-wechat">微信sdk</a></li>
<li><input checked="" disabled="" type="checkbox"> <a href="https://github.com/qbhy/goal-aliyun">阿里云sdk</a></li>
<li><input disabled="" type="checkbox"> 极光推送 sdk</li>
<li><input disabled="" type="checkbox"> 字节跳动 sdk</li>
<li><input disabled="" type="checkbox"> QQ sdk</li>
</ul>
</li>
</ul>
<h2 id="参与项目">参与项目</h2>
<p>你可以通过以下方式参与到项目中来</p>
<ul>
<li>完善已有模块（优化或者改bug）</li>
<li>完善或者修复测试用例</li>
<li>开发新的模块（比如标记为未完成的模块）</li>
<li>添加或者修改完善注释（用英语）</li>
<li>修改错别字或者不当用词（文档和代码都可以，比如变量命名）</li>
<li>帮助开发独立文档（readme是临时的，后面需要独立的文档项目）</li>
<li>开发扩展包（goal 的扩展相当容易，后面我会写教程，现阶段进群聊）</li>
<li>使用 goal 实现各种例子（放examples文件夹或者新建仓库在这里引用）</li>
<li>更多方式进群聊吧</li>
</ul>
<h2 id="交流">交流</h2>
<p>微信群<br><img loading="lazy" style="max-width: 200px" src="https://s2.loli.net/2022/03/03/n9jESh6r4e3WQsL.png" data-is-external-image="true" /><br>QQ群<br><img loading="lazy" style="max-width: 200px" src="https://i.loli.net/2021/10/29/dpLvehizJCX7EUN.jpg" data-is-external-image="true" /></p>

            ]]>
        </content>
    </entry>
</feed>
