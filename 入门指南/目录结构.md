# 目录结构

## 介绍

默认的 Goal 应用程序结构旨在为大型和小型应用程序提供一个良好的起点。但是你可以自由地组织你的应用程序。Goal
几乎不会限制任何给定结构体和方法的位置。

[//]: # (TODO 这里放一个教程链接)

## 根目录

### app 目录

app 目录包含应用程序的核心代码。我们很快将详细探讨这个目录；但是，你的应用程序中几乎所有的结构体和方法都将在此目录中。

### bootstrap 目录

该目录定义了数个 Goal 应用程序入口。
Goal 为开发者提供了很多功能服务，其中不乏需要常驻的服务，如任务调度器（schedule）、http服务、队列服务（queue）、微服务（micro
service）等，默认情况下你可以直接通过 go run main.go 启动一个 all in one 的 Goal 应用程序。
但是如果你希望只运行其中一个常驻服务，如队列消费者，可以运行：

```bash
go run bootstrap/queue/main.go
```

### config 目录

config 目录，顾名思义，包含所有应用程序的配置文件。建议你阅读所有这些文件并熟悉所有可用选项。

### database 目录

database 目录，如果需要，你可以使用此目录来保存 SQLite 数据库。

### routes 目录

routes 目录包含应用程序的所有路由定义。默认情况下，Goal 包括几个路由文件：api.go、sse.go 和 ws.go。
路由收集函数由服务容器调用，你可以在路由收集函数中注入应用中已注册的对象，如 `contracts.Router`

api.go 文件，这些路由旨在是无状态的，因此通过这些路由进入应用程序的请求旨在通过令牌进行身份验证，并且不会访问会话状态。

see.go 文件，这些路由用于定义服务器事件（sse）通知的路由。

ws.go 文件，这些路由用于定义 websocket 路由。

### storage 目录

storage 目录包含日志文件、基于文件的会话、文件缓存和基于文件的布隆过滤器、文件系统的文件等。 该目录分为 framework 和 logs
、app 目录。 app 目录可用于存储应用程序生成的任何文件。 framework 目录用于存储框架生成的会话文件、缓存文件、布隆过滤器文件。
最后，logs 目录包含应用程序的日志文件。

storage/app/public 目录可用于存储用户生成的文件，例如个人资料头像，应该是公开可访问的。你应该在 public/storage
创建一个符号链接，该符号链接指向此目录。你可以使用 php artisan storage:link Artisan 命令创建链接。

### tests 目录

tests 目录包含你的自动化测试。 每个测试文件都应以单词 `_test` 作为后缀。 你可以使用 `go test ./tests` 命令运行测试。

## app 目录

你的大部分应用程序都位于 app 目录中。

`app` 目录包含各种附加目录，例如 `console`、`http` 和 `providers` 等。将 `console` 和 `http` 目录视为为应用程序核心提供
API。
`HTTP` 协议和 `CLI` 都是与应用程序交互的机制，但实际上并不包含应用程序逻辑。换句话说，它们是向你的应用程序发出命令的两种方式。
`console` 目录包含你的所有 `command` 命令，如 `run`、`env encrypt` 等，而 `http` 目录包含你的控制器、中间件和请求。

[//]: # (TODO 实现各种 make 命令并更新文档)

### console 目录

`console` 目录包含应用程序的所有自定义 `command` 命令。 该目录还包含你的控制台内核，这是你注册 `自定义命令`
和定义 `计划任务` 的地方。

### events 目录

此目录默认不存在，`events` 目录用于存放 `事件类`。
事件可用于提醒应用程序的其他部分发生了给定的操作，从而提供了极大的灵活性和解耦性。

### exceptions 目录

`exceptions` 目录包含应用程序的异常处理程序，也是放置应用程序抛出的任何异常的好地方。 如果你想自定义记录或呈现异常的方式，你应该修改此目录中的
Handler 类。

### http 目录

`http` 目录包含你的控制器、中间件和表单请求。几乎所有处理进入应用程序的 `http请求` 的逻辑都将放在这个目录中。

### jobs 目录

`jobs` 目录包含你的应用程序的 `队列作业`。
作业可能由你的应用程序排队或在当前请求生命周期内同步运行。在当前请求期间同步运行的作业有时被称为「命令」，因为它们是 `命令模式`
的实现。

### listeners 目录

`listeners` 目录包含用于处理你的 `events` 的类，即 `事件侦听器`。 事件侦听器接收事件实例并执行逻辑以响应被触发的事件。
例如，`UserRegistered` 事件可能由 `SendWelcomeEmail` 监听器处理。

### Mail 目录

`mail` 目录包含你的应用程序发送的所有 `代表电子邮件的类`。
Mail 对象允许你将构建电子邮件的所有逻辑封装在一个简单的类中，该类可以使用 `contracts.Mailer` 的 `Send` 方法发送。

### models 目录

`models` 目录包含所有模型类。 Goal 中包含的提供了一个漂亮、简单的实现来处理你的数据库。
每个数据库表都有一个相应的「模型」，用于与该表进行交互。 模型允许你查询表中的数据，以及将新记录插入表中。

[//]: # (TODO 完善通知系统并更新通知系统目录文档)

[//]: # (TODO 完善权限策略系统并更新策略目录文档)

### providers 目录

`providers` 目录包含程序中所有的 `服务提供者`。服务提供者通过在服务容器中绑定服务、注册事件或执行任何其他任务来引导应用程序以应对传入请求。

在一个新的 Goal 应用程序中，这个目录已经包含了几个提供者。你也可以根据需要将自己的服务提供者添加到此目录。